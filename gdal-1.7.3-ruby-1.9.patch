diff -Nur gdal-1.7.3-fedora/swig/ruby/RubyMakefile.mk gdal-1.7.3-fedora-ruby/swig/ruby/RubyMakefile.mk
--- gdal-1.7.3-fedora/swig/ruby/RubyMakefile.mk	2010-11-07 19:28:49.000000000 +0100
+++ gdal-1.7.3-fedora-ruby/swig/ruby/RubyMakefile.mk	2012-02-19 23:24:07.197452221 +0100
@@ -18,14 +18,22 @@
 include $(GDAL_ROOT)/GDALmake.opt
 
 RUBY_MODULES = gdal.so ogr.so gdalconst.so osr.so
-RUBY_INCLUDE_DIR := $(shell ruby -rrbconfig -e "puts Config::CONFIG['archdir']")
+RUBY_INCLUDE_DIR := $(shell ruby -rrbconfig -e "puts Config::CONFIG['rubyhdrdir'] || Config::CONFIG['archdir']")
+RUBY_ARCH_INCLUDE_DIR := $(shell ruby -rrbconfig -e "puts Config::CONFIG['rubyhdrdir'] + '/' + Config::CONFIG['arch'] unless Config::CONFIG['rubyhdrdir'].nil?")
 RUBY_LIB_DIR := $(shell ruby -rrbconfig -e "puts Config::CONFIG['libdir']")
 RUBY_SO_NAME := $(shell ruby -rrbconfig -e "puts Config::CONFIG['RUBY_SO_NAME']")
 RUBY_EXTENSIONS_DIR := $(shell ruby -rrbconfig -e "puts Config::CONFIG['sitearchdir']")
 INSTALL_DIR := $(RUBY_EXTENSIONS_DIR)/gdal
 
+ifeq ($(RUBY_ARCH_INCLUDE_DIR),)
+# For Ruby < 1.9
 RUBY_INCLUDE = -I$(RUBY_INCLUDE_DIR)
-LDFLAGS += -Xcompiler -shared -L$(RUBY_LIB_DIR)
+else
+# For Ruby 1.9
+RUBY_INCLUDE = -I$(RUBY_INCLUDE_DIR) -I$(RUBY_ARCH_INCLUDE_DIR)
+endif
+
+LDFLAGS += -shared -L$(RUBY_LIB_DIR)
 RUBY_LIB := -l$(RUBY_SO_NAME)
 
 build: $(RUBY_MODULES)
